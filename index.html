<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>QR Code Payment</title>
</head>
<body>
  <h1>Scan This QR Code to Pay</h1>
  <p>Amount to be paid: Rs.<span id="amount">â€”</span></p>
  <img id="qrImage" src="" alt="QR Code">

  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

  <script>
    // Firebase config
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_AUTH_DOMAIN",
      databaseURL: "https://entry-gate-ddc57-default-rtdb.firebaseio.com/",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_STORAGE_BUCKET",
      messagingSenderId: "YOUR_SENDER_ID",
      appId: "YOUR_APP_ID"
    };

    // Init Firebase
    firebase.initializeApp(firebaseConfig);

    // Fetch latest vehicle and amount
    firebase.database().ref('parking').limitToLast(1).on('value', snapshot => {
      snapshot.forEach(childSnapshot => {
        const data = childSnapshot.val();
        const vehicleNo = data.vehicleNo || "NA";
        const amount = data.price || 0;

        // Show amount
        document.getElementById("amount").textContent = amount;

        // Make second page URL
        const secondPageUrl = `https://santhoshbhavanpc.github.io/payment2.1/?vehicleNo=${encodeURIComponent(vehicleNo)}&amount=${encodeURIComponent(amount)}`;

        // Generate QR
        const qrUrl = `https://chart.googleapis.com/chart?cht=qr&chs=200x200&chl=${encodeURIComponent(secondPageUrl)}`;
        document.getElementById("qrImage").src = qrUrl;
      });
    });
  </script>
</body>
</html>c
